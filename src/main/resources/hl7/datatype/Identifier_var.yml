#
# (C) Copyright IBM Corp. 2020
#
# SPDX-License-Identifier: Apache-2.0
#
# Creates an identifier, you must provide all the values and variables, including those for CodeableConcept_var
---
type: 
   valueOf: datatype/CodeableConcept_var
   generateList: true
   expressionType: resource
    
# value:
#    type: STRING
#    # valueOf:  $valueIn | $valueIn2 | $valueIn3
#    valueOf:  $firstValueIn
#    vars: 
#      firstValueIn: STRING, $valueIn | $valueIn2 | $valueIn3
#      secondValueIn: $valueIn2 
#      thirdValueIn: $valueIn3

# system_2:
#    condition: $systemCX NOT_NULL
#    valueOf: $join
#    vars:
#       join: $systemCX, GeneralUtils.noWhiteSpace(join

value:
   type: STRING
   valueOf: 'GeneralUtils.getFirstNonNullValue(valueIn,valueIn2,valueIn3)'
   expressionType: JEXL
   # vars: 
   #    firstValueIn: $valueIn
   #    secondValueIn: $valueIn2 
   #    thirdValueIn: $valueIn3

system_1:
   condition: $valueIn NOT_NULL && $systemCX NOT_NULL 
   valueOf: $join
   vars:
      join: $systemCX, GeneralUtils.noWhiteSpace(join)

system_2:
   condition: $valueIn NULL && $valueIn2 NOT_NULL && $systemCX2 NOT_NULL
   valueOf: $join
   vars:
      join: $systemCX2, GeneralUtils.noWhiteSpace(join)   

system_3:
   condition: $valueIn NULL && $valueIn2 NULL && $valueIn3 NOT_NULL && $systemCX3 NOT_NULL
   valueOf: $join
   vars:
      join: $systemCX3, GeneralUtils.noWhiteSpace(join)           

system_4:
   type: STRING
   valueOf: $systemId   