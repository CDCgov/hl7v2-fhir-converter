#
# (C) Copyright IBM Corp. 2020
#
# SPDX-License-Identifier: Apache-2.0
#
---
# value_1 is calculated when time1 and time2 are present 
value_1:
    valueOf: 'GeneralUtils.diffDateMin(var1,var2)'
    expressionType: JEXL
    vars:
      var1: $time1
      var2: $time2

# value_2 or _3 comes from $time3 if either $time1 or $time2 is missing
value_2:
  condition: $time3 NOT_NULL && $time1 NULL
  valueOf: $time3

# (near duplicate of value_2 to handle complex boolean) 
value_3:
  condition: $time3 NOT_NULL && $time2 NULL
  valueOf: $time3  
  
unit_1:
  condition: $time1 NOT_NULL && $time2 NOT_NULL
  type: String
  value:  "minutes"

unit_2:
  condition: $time3 NOT_NULL
  type: String
  valueOf: "days"

code_1:
  condition: $time1 NOT_NULL && $time2 NOT_NULL
  type: String
  value:  "min"

code_2:
  condition: $time3 NOT_NULL
  type: String
  valueOf: "d"  

# system is hardcoded to UCUM, but must only show if other values show
system_1:
  condition: $time1 NOT_NULL && $time2 NOT_NULL
  type: SYSTEM_URL
  value: 'UCUM'

# (near duplicate of system_1 to handle complex boolean) 
system_2:
  condition: $time3 NOT_NULL
  type: SYSTEM_URL
  value: 'UCUM'