#
# (C) Copyright IBM Corp. 2020
#
# SPDX-License-Identifier: Apache-2.0
#
---
resourceType: Encounter
id:
  type: STRING
  evaluate: 'UUID.randomUUID()'

identifier:
    resource: datatype/Identifier *
    specs: PV1.19

status:
    type: STRING
    evaluate: 'GeneralUtils.getEncounterStatus(vars1,vars2,vars3)'
    vars: 
      vars1: String, PV1.45
      vars2: String, PV1.44
      vars3: String, PV2.16

class:
    resource: datatype/Coding
    vars:
       code: PV1.2

type:
   resource: datatype/CodeableConcept *
   specs: PV1.4 | PV1.18


serviceType:
   resource: datatype/CodeableConcept
   specs: PV1.10


priority:
   resource: datatype/CodeableConcept
   specs: PV2.25


episodeOfCare:
   type: STRING
   specs: PV1.54 | PV1.53

period: 
    resource: datatype/Period
    vars: 
       start: PV1.44
       end: PV1.45

length:
    resource: datatype/Duration
    vars: 
      time1: DATE_TIME, PV1.44
      time2: DATE_TIME, PV1.45

reasonCode:
    resource: datatype/CodeableConcept *
    specs: EVN.4 | PV2.3



hospitalization:
    resource: secondary/Hospitalization

subject:
    resource: datatype/Reference
    specs: $Patient


